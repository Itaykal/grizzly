apiVersion: grizzly.grafana.com/v1alpha1
kind: PrometheusAlertmanagerConfig
metadata:
  name: test-alertmanager
spec:
  template_files:
    demo: "{{ define \"demo.text\" }}hi{{ end }}"
  alertmanager_config:
    global:
      http_config:
        enable_http2: true
        follow_redirects: true
        proxy_url: null
      telegram_api_url: https://example.com
      receivers:
      - name: default-reciever
      - name: demoReciever
        slack_configs:
          - api_url: https://slack.example.com
            channel: '#demo'
            text: '{{ template "demo.text" }}'
            title: '{{ template "demo.text" }}'
      route:
        - reciever: default-reciever
          continue: false
          matchers: []
          mute_time_intervals: []
          routes:
            - continue: false
              group_by:
                - alertname
                - grafana_folder
              group_interval: 1m
              group_wait: 1m
              matchers:
                - slack=true
              reciever: demoReciever
              repeat_interval: 15m
      templates:
        - demo


